<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Cs-uy-4513-f25-team3</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.13.2/application.js' type='text/javascript'></script>
    <link href='./assets/0.13.2/application.css' media='screen, projection, print' rel='stylesheet' type='text/css' />
    <link rel="icon" type="image/png" href="./assets/0.13.2/favicon_yellow.png" />
  </head>

  <body>
    <div id="loading">
      <img src="./assets/0.13.2/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" class="hide">
      <div class="timestamp">Generated <abbr class="timeago" title="2025-12-11T16:04:36-05:00">2025-12-11T16:04:36-05:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent">
      <span class="yellow">
  85.83%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         23.43
       </span>
    </span> hits/line
    )
  </h2>

  <a name="AllFiles"></a>

  <div>
    <b>22</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>508</b> relevant lines,
    <span class="green"><b>436</b> lines covered</span> and
    <span class="red"><b>72</b> lines missed. </span>
    (<span class="yellow">
  85.83%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d1d01102c20a3888365f53173b9eb5bc358b69fc" class="src_link" title="app/controllers/accounts_controller.rb">app/controllers/accounts_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">92.00 %</td>
            <td class="cell--number">41</td>
            <td class="cell--number">25</td>
            <td class="cell--number">23</td>
            <td class="cell--number">2</td>
            <td class="cell--number">3.68</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#53d53efc2ade2c200da0f376d189c1b9fcb9ef16" class="src_link" title="app/controllers/application_controller.rb">app/controllers/application_controller.rb</a></td>
            <td class="red strong cell--number t-file__coverage">80.00 %</td>
            <td class="cell--number">26</td>
            <td class="cell--number">15</td>
            <td class="cell--number">12</td>
            <td class="cell--number">3</td>
            <td class="cell--number">172.73</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#3c149e1f6a2dbc29b17b63d8802cabd58e456493" class="src_link" title="app/controllers/concerns/search_filterable.rb">app/controllers/concerns/search_filterable.rb</a></td>
            <td class="green strong cell--number t-file__coverage">94.44 %</td>
            <td class="cell--number">61</td>
            <td class="cell--number">36</td>
            <td class="cell--number">34</td>
            <td class="cell--number">2</td>
            <td class="cell--number">39.17</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#969fabce688a964d0121d81d300280133a87e55d" class="src_link" title="app/controllers/flights_controller.rb">app/controllers/flights_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">80.56 %</td>
            <td class="cell--number">57</td>
            <td class="cell--number">36</td>
            <td class="cell--number">29</td>
            <td class="cell--number">7</td>
            <td class="cell--number">6.94</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#026a7873650a56654c375270e5da94a97e7ecfc6" class="src_link" title="app/controllers/hotels_controller.rb">app/controllers/hotels_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">80.56 %</td>
            <td class="cell--number">56</td>
            <td class="cell--number">36</td>
            <td class="cell--number">29</td>
            <td class="cell--number">7</td>
            <td class="cell--number">6.94</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#27d6b81a8df0fe93b06d95194e229765c0f6c270" class="src_link" title="app/controllers/itineraries_controller.rb">app/controllers/itineraries_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">88.52 %</td>
            <td class="cell--number">109</td>
            <td class="cell--number">61</td>
            <td class="cell--number">54</td>
            <td class="cell--number">7</td>
            <td class="cell--number">31.05</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#3287a97176dfb4c635bb36f6318a341a95b67dad" class="src_link" title="app/controllers/itinerary_groups_controller.rb">app/controllers/itinerary_groups_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">87.32 %</td>
            <td class="cell--number">139</td>
            <td class="cell--number">71</td>
            <td class="cell--number">62</td>
            <td class="cell--number">9</td>
            <td class="cell--number">10.03</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#502c680c2957f1435037d2fa6a64dea565e1a6d1" class="src_link" title="app/controllers/messages_controller.rb">app/controllers/messages_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">90.63 %</td>
            <td class="cell--number">62</td>
            <td class="cell--number">32</td>
            <td class="cell--number">29</td>
            <td class="cell--number">3</td>
            <td class="cell--number">6.75</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#fc2417fa08e89e0a272e03ebf3ab11d14c7f53a3" class="src_link" title="app/controllers/sessions_controller.rb">app/controllers/sessions_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">80.77 %</td>
            <td class="cell--number">41</td>
            <td class="cell--number">26</td>
            <td class="cell--number">21</td>
            <td class="cell--number">5</td>
            <td class="cell--number">23.50</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#6847f39bcad06aa4ff7a3ac635215779a0cb1bbb" class="src_link" title="app/controllers/users_controller.rb">app/controllers/users_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">83.67 %</td>
            <td class="cell--number">98</td>
            <td class="cell--number">49</td>
            <td class="cell--number">41</td>
            <td class="cell--number">8</td>
            <td class="cell--number">4.39</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#a495addb7b1a0494af5c5eb835bee36d736fcf07" class="src_link" title="app/helpers/application_helper.rb">app/helpers/application_helper.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">87.50 %</td>
            <td class="cell--number">13</td>
            <td class="cell--number">8</td>
            <td class="cell--number">7</td>
            <td class="cell--number">1</td>
            <td class="cell--number">18.25</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#c28cf9f519019cbc3cccd9d89111e8646427a7c7" class="src_link" title="app/jobs/application_job.rb">app/jobs/application_job.rb</a></td>
            <td class="red strong cell--number t-file__coverage">0.00 %</td>
            <td class="cell--number">7</td>
            <td class="cell--number">2</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2</td>
            <td class="cell--number">0.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#72f9f6f8d251fb1b6f853ac1b6bf157d6d19f0f9" class="src_link" title="app/mailers/application_mailer.rb">app/mailers/application_mailer.rb</a></td>
            <td class="red strong cell--number t-file__coverage">0.00 %</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#49891b2adf3dcea70c8005bc2e4296c99fda94fb" class="src_link" title="app/models/application_record.rb">app/models/application_record.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">3</td>
            <td class="cell--number">2</td>
            <td class="cell--number">2</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#240b00c1474a6d2302d45d2d362776f54eb8547a" class="src_link" title="app/models/flight.rb">app/models/flight.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">13</td>
            <td class="cell--number">9</td>
            <td class="cell--number">9</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#fa2c06ead3062c1842f6c759f36c12ff8aa6ae6a" class="src_link" title="app/models/hotel.rb">app/models/hotel.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">16</td>
            <td class="cell--number">9</td>
            <td class="cell--number">9</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#9836a563bfc4659434f196e69b471aa75bd8b0b7" class="src_link" title="app/models/itinerary_attendee.rb">app/models/itinerary_attendee.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">9</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#ca669059dc7f9b44452d3727e6b9464f494bf161" class="src_link" title="app/models/itinerary_flight.rb">app/models/itinerary_flight.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">6</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d1ce25ce2e37e4dcdf22a6ecd6b51bed9ce030ff" class="src_link" title="app/models/itinerary_group.rb">app/models/itinerary_group.rb</a></td>
            <td class="green strong cell--number t-file__coverage">92.68 %</td>
            <td class="cell--number">88</td>
            <td class="cell--number">41</td>
            <td class="cell--number">38</td>
            <td class="cell--number">3</td>
            <td class="cell--number">50.85</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#1cc59e84cc0399b043da6ad0e47751762cd9bdbd" class="src_link" title="app/models/itinerary_hotel.rb">app/models/itinerary_hotel.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">6</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#ad9e1669699c3de6324859019bf0ccd417d8d980" class="src_link" title="app/models/message.rb">app/models/message.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">4</td>
            <td class="cell--number">3</td>
            <td class="cell--number">3</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#442909b221cd697bf8562543187c3bd3089ea105" class="src_link" title="app/models/user.rb">app/models/user.rb</a></td>
            <td class="red strong cell--number t-file__coverage">70.97 %</td>
            <td class="cell--number">50</td>
            <td class="cell--number">31</td>
            <td class="cell--number">22</td>
            <td class="cell--number">9</td>
            <td class="cell--number">43.94</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>


        
          <div class="file_list_container" id="Controllers">
  <h2>
    <span class="group_name">Controllers</span>
    (<span class="covered_percent">
      <span class="yellow">
  86.3%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         21.29
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Controllers"></a>

  <div>
    <b>10</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>387</b> relevant lines,
    <span class="green"><b>334</b> lines covered</span> and
    <span class="red"><b>53</b> lines missed. </span>
    (<span class="yellow">
  86.3%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d1d01102c20a3888365f53173b9eb5bc358b69fc" class="src_link" title="app/controllers/accounts_controller.rb">app/controllers/accounts_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">92.00 %</td>
            <td class="cell--number">41</td>
            <td class="cell--number">25</td>
            <td class="cell--number">23</td>
            <td class="cell--number">2</td>
            <td class="cell--number">3.68</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#53d53efc2ade2c200da0f376d189c1b9fcb9ef16" class="src_link" title="app/controllers/application_controller.rb">app/controllers/application_controller.rb</a></td>
            <td class="red strong cell--number t-file__coverage">80.00 %</td>
            <td class="cell--number">26</td>
            <td class="cell--number">15</td>
            <td class="cell--number">12</td>
            <td class="cell--number">3</td>
            <td class="cell--number">172.73</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#3c149e1f6a2dbc29b17b63d8802cabd58e456493" class="src_link" title="app/controllers/concerns/search_filterable.rb">app/controllers/concerns/search_filterable.rb</a></td>
            <td class="green strong cell--number t-file__coverage">94.44 %</td>
            <td class="cell--number">61</td>
            <td class="cell--number">36</td>
            <td class="cell--number">34</td>
            <td class="cell--number">2</td>
            <td class="cell--number">39.17</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#969fabce688a964d0121d81d300280133a87e55d" class="src_link" title="app/controllers/flights_controller.rb">app/controllers/flights_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">80.56 %</td>
            <td class="cell--number">57</td>
            <td class="cell--number">36</td>
            <td class="cell--number">29</td>
            <td class="cell--number">7</td>
            <td class="cell--number">6.94</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#026a7873650a56654c375270e5da94a97e7ecfc6" class="src_link" title="app/controllers/hotels_controller.rb">app/controllers/hotels_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">80.56 %</td>
            <td class="cell--number">56</td>
            <td class="cell--number">36</td>
            <td class="cell--number">29</td>
            <td class="cell--number">7</td>
            <td class="cell--number">6.94</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#27d6b81a8df0fe93b06d95194e229765c0f6c270" class="src_link" title="app/controllers/itineraries_controller.rb">app/controllers/itineraries_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">88.52 %</td>
            <td class="cell--number">109</td>
            <td class="cell--number">61</td>
            <td class="cell--number">54</td>
            <td class="cell--number">7</td>
            <td class="cell--number">31.05</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#3287a97176dfb4c635bb36f6318a341a95b67dad" class="src_link" title="app/controllers/itinerary_groups_controller.rb">app/controllers/itinerary_groups_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">87.32 %</td>
            <td class="cell--number">139</td>
            <td class="cell--number">71</td>
            <td class="cell--number">62</td>
            <td class="cell--number">9</td>
            <td class="cell--number">10.03</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#502c680c2957f1435037d2fa6a64dea565e1a6d1" class="src_link" title="app/controllers/messages_controller.rb">app/controllers/messages_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">90.63 %</td>
            <td class="cell--number">62</td>
            <td class="cell--number">32</td>
            <td class="cell--number">29</td>
            <td class="cell--number">3</td>
            <td class="cell--number">6.75</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#fc2417fa08e89e0a272e03ebf3ab11d14c7f53a3" class="src_link" title="app/controllers/sessions_controller.rb">app/controllers/sessions_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">80.77 %</td>
            <td class="cell--number">41</td>
            <td class="cell--number">26</td>
            <td class="cell--number">21</td>
            <td class="cell--number">5</td>
            <td class="cell--number">23.50</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#6847f39bcad06aa4ff7a3ac635215779a0cb1bbb" class="src_link" title="app/controllers/users_controller.rb">app/controllers/users_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">83.67 %</td>
            <td class="cell--number">98</td>
            <td class="cell--number">49</td>
            <td class="cell--number">41</td>
            <td class="cell--number">8</td>
            <td class="cell--number">4.39</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Channels">
  <h2>
    <span class="group_name">Channels</span>
    (<span class="covered_percent">
      <span class="green">
  100.0%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Channels"></a>

  <div>
    <b>0</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>0</b> relevant lines,
    <span class="green"><b>0</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed. </span>
    (<span class="green">
  100.0%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Models">
  <h2>
    <span class="group_name">Models</span>
    (<span class="covered_percent">
      <span class="yellow">
  88.79%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         32.84
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Models"></a>

  <div>
    <b>9</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>107</b> relevant lines,
    <span class="green"><b>95</b> lines covered</span> and
    <span class="red"><b>12</b> lines missed. </span>
    (<span class="yellow">
  88.79%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#49891b2adf3dcea70c8005bc2e4296c99fda94fb" class="src_link" title="app/models/application_record.rb">app/models/application_record.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">3</td>
            <td class="cell--number">2</td>
            <td class="cell--number">2</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#240b00c1474a6d2302d45d2d362776f54eb8547a" class="src_link" title="app/models/flight.rb">app/models/flight.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">13</td>
            <td class="cell--number">9</td>
            <td class="cell--number">9</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#fa2c06ead3062c1842f6c759f36c12ff8aa6ae6a" class="src_link" title="app/models/hotel.rb">app/models/hotel.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">16</td>
            <td class="cell--number">9</td>
            <td class="cell--number">9</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#9836a563bfc4659434f196e69b471aa75bd8b0b7" class="src_link" title="app/models/itinerary_attendee.rb">app/models/itinerary_attendee.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">9</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#ca669059dc7f9b44452d3727e6b9464f494bf161" class="src_link" title="app/models/itinerary_flight.rb">app/models/itinerary_flight.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">6</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d1ce25ce2e37e4dcdf22a6ecd6b51bed9ce030ff" class="src_link" title="app/models/itinerary_group.rb">app/models/itinerary_group.rb</a></td>
            <td class="green strong cell--number t-file__coverage">92.68 %</td>
            <td class="cell--number">88</td>
            <td class="cell--number">41</td>
            <td class="cell--number">38</td>
            <td class="cell--number">3</td>
            <td class="cell--number">50.85</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#1cc59e84cc0399b043da6ad0e47751762cd9bdbd" class="src_link" title="app/models/itinerary_hotel.rb">app/models/itinerary_hotel.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">6</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#ad9e1669699c3de6324859019bf0ccd417d8d980" class="src_link" title="app/models/message.rb">app/models/message.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">4</td>
            <td class="cell--number">3</td>
            <td class="cell--number">3</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#442909b221cd697bf8562543187c3bd3089ea105" class="src_link" title="app/models/user.rb">app/models/user.rb</a></td>
            <td class="red strong cell--number t-file__coverage">70.97 %</td>
            <td class="cell--number">50</td>
            <td class="cell--number">31</td>
            <td class="cell--number">22</td>
            <td class="cell--number">9</td>
            <td class="cell--number">43.94</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Mailers">
  <h2>
    <span class="group_name">Mailers</span>
    (<span class="covered_percent">
      <span class="red">
  0.0%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Mailers"></a>

  <div>
    <b>1</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>4</b> relevant lines,
    <span class="green"><b>0</b> lines covered</span> and
    <span class="red"><b>4</b> lines missed. </span>
    (<span class="red">
  0.0%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#72f9f6f8d251fb1b6f853ac1b6bf157d6d19f0f9" class="src_link" title="app/mailers/application_mailer.rb">app/mailers/application_mailer.rb</a></td>
            <td class="red strong cell--number t-file__coverage">0.00 %</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0.00</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Helpers">
  <h2>
    <span class="group_name">Helpers</span>
    (<span class="covered_percent">
      <span class="yellow">
  87.5%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         18.25
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Helpers"></a>

  <div>
    <b>1</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>8</b> relevant lines,
    <span class="green"><b>7</b> lines covered</span> and
    <span class="red"><b>1</b> lines missed. </span>
    (<span class="yellow">
  87.5%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#a495addb7b1a0494af5c5eb835bee36d736fcf07" class="src_link" title="app/helpers/application_helper.rb">app/helpers/application_helper.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">87.50 %</td>
            <td class="cell--number">13</td>
            <td class="cell--number">8</td>
            <td class="cell--number">7</td>
            <td class="cell--number">1</td>
            <td class="cell--number">18.25</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Jobs">
  <h2>
    <span class="group_name">Jobs</span>
    (<span class="covered_percent">
      <span class="red">
  0.0%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Jobs"></a>

  <div>
    <b>1</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>2</b> relevant lines,
    <span class="green"><b>0</b> lines covered</span> and
    <span class="red"><b>2</b> lines missed. </span>
    (<span class="red">
  0.0%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#c28cf9f519019cbc3cccd9d89111e8646427a7c7" class="src_link" title="app/jobs/application_job.rb">app/jobs/application_job.rb</a></td>
            <td class="red strong cell--number t-file__coverage">0.00 %</td>
            <td class="cell--number">7</td>
            <td class="cell--number">2</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2</td>
            <td class="cell--number">0.00</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Libraries">
  <h2>
    <span class="group_name">Libraries</span>
    (<span class="covered_percent">
      <span class="green">
  100.0%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Libraries"></a>

  <div>
    <b>0</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>0</b> relevant lines,
    <span class="green"><b>0</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed. </span>
    (<span class="green">
  100.0%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
      </tbody>
    </table>
  </div>
</div>

        
      </div>

      <div id="footer">
        Generated by <a href="https://github.com/simplecov-ruby/simplecov">simplecov</a> v0.22.0
        and simplecov-html v0.13.2<br/>
        using Cucumber Features, RSpec
      </div>

      <div class="source_files">
      
        <div class="source_table" id="d1d01102c20a3888365f53173b9eb5bc358b69fc">
  <div class="header">
    <h3>app/controllers/accounts_controller.rb</h3>
    <h4>
      <span class="green">
  92.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>25</b> relevant lines.
      <span class="green"><b>23</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class AccountsController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    before_action :require_admin, only: [:index, :update, :destroy]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="4">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def require_admin</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="23" data-linenumber="5">
            
              <span class="hits">23</span>
            

            

            <code class="ruby">        unless current_user&amp;.admin?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="6">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">            flash[:alert] = &quot;Access Denied&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="7">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">            redirect_to itineraries_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="11">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def index </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12" data-linenumber="12">
            
              <span class="hits">12</span>
            

            

            <code class="ruby">        @accounts = User.where.not(id: current_user.id) # all accounts except current user</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="14">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="15">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        user = User.find_by(id: params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="16">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        unless current_user.admin?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="17">
            

            

            <code class="ruby">            redirect_to itineraries_path, alert: &quot;Access Denied&quot; and return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="20">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        if user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="21">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">            user.destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="22">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">            redirect_to accounts_path, notice: &quot;Account deleted&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            

            

            <code class="ruby">        else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="24">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">            redirect_to accounts_path, alert: &quot;Account does not exist&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="27">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def update</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="28">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">        user = User.find_by(id: params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="29">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">        unless current_user.admin?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="30">
            

            

            <code class="ruby">            redirect_to itineraries_path, alert: &quot;Access Denied&quot; and return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="32">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">        new_role = params[:user][:role]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="33">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">        if [&quot;user&quot;, &quot;organizer&quot;, &quot;admin&quot;].include?(new_role)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="34">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">            user.update(role: new_role)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="35">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">            redirect_to accounts_path, notice: &quot;Account role updated successfully&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            

            

            <code class="ruby">        else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="37">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">            redirect_to accounts_path, alert: &quot;Invalid role type&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="53d53efc2ade2c200da0f376d189c1b9fcb9ef16">
  <div class="header">
    <h3>app/controllers/application_controller.rb</h3>
    <h4>
      <span class="red">
  80.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>15</b> relevant lines.
      <span class="green"><b>12</b> lines covered</span> and
      <span class="red"><b>3</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class ApplicationController &lt; ActionController::Base</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            

            

            <code class="ruby">  # Only allow modern browsers supporting webp images, web push, badges, import maps, CSS nesting, and CSS :has.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  allow_browser versions: :modern</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="4">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  before_action :require_login</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="364" data-linenumber="5">
            
              <span class="hits">364</span>
            

            

            <code class="ruby">  skip_before_action :require_login, if: -&gt; { request.path.start_with?(&quot;/auth/&quot;) }</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="6">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  helper_method :current_user</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="8">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def current_user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1894" data-linenumber="9">
            
              <span class="hits">1894</span>
            

            

            <code class="ruby">        @current_user ||= User.find_by(id: session[:user_id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="12">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def require_login # checks if user is logged in, called before all protected pages</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="299" data-linenumber="13">
            
              <span class="hits">299</span>
            

            

            <code class="ruby">    unless session[:user_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="10" data-linenumber="14">
            
              <span class="hits">10</span>
            

            

            <code class="ruby">      flash[:alert] = &quot;Please log in to continue&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="10" data-linenumber="15">
            
              <span class="hits">10</span>
            

            

            <code class="ruby">      redirect_to login_path </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="19">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def require_admin</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="20">
            

            

            <code class="ruby">    unless current_user&amp;.role == &quot;admin&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="21">
            

            

            <code class="ruby">      flash[:alert] = &quot;Access Denied&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="22">
            

            

            <code class="ruby">      redirect_to itineraries_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="3c149e1f6a2dbc29b17b63d8802cabd58e456493">
  <div class="header">
    <h3>app/controllers/concerns/search_filterable.rb</h3>
    <h4>
      <span class="green">
  94.44%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>36</b> relevant lines.
      <span class="green"><b>34</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">module SearchFilterable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  extend ActiveSupport::Concern</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="4">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="6">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def handle_date_errors_for(scope_class)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="140" data-linenumber="7">
            
              <span class="hits">140</span>
            

            

            <code class="ruby">    start_param = params[:start_date]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="140" data-linenumber="8">
            
              <span class="hits">140</span>
            

            

            <code class="ruby">    end_param   = params[:end_date]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="140" data-linenumber="10">
            
              <span class="hits">140</span>
            

            

            <code class="ruby">    return [scope_class.all, false] if start_param.blank? &amp;&amp; end_param.blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="11" data-linenumber="12">
            
              <span class="hits">11</span>
            

            

            <code class="ruby">    start_date = start_param.present? ? (Date.parse(start_param) rescue nil) : nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="11" data-linenumber="13">
            
              <span class="hits">11</span>
            

            

            <code class="ruby">    end_date   = end_param.present?   ? (Date.parse(end_param)   rescue nil) : nil</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="11" data-linenumber="15">
            
              <span class="hits">11</span>
            

            

            <code class="ruby">    if (start_param.present? &amp;&amp; start_date.nil?) ||</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="11" data-linenumber="16">
            
              <span class="hits">11</span>
            

            

            <code class="ruby">      (end_param.present? &amp;&amp; end_date.nil?)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="17">
            

            

            <code class="ruby">      flash.now[:alert] = &quot;Please enter valid dates&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="18">
            

            

            <code class="ruby">      return [scope_class.none, true]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="11" data-linenumber="21">
            
              <span class="hits">11</span>
            

            

            <code class="ruby">    if start_date &amp;&amp; end_date &amp;&amp; end_date &lt; start_date</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="22">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">      flash.now[:alert] = &quot;End date must be after start date&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="23">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">      return [scope_class.none, true]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="26">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    [scope_class.all, false]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="30">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def handle_cost_errors_for(scope_class)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="134" data-linenumber="31">
            
              <span class="hits">134</span>
            

            

            <code class="ruby">    min = params[:min_cost]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="134" data-linenumber="32">
            
              <span class="hits">134</span>
            

            

            <code class="ruby">    max = params[:max_cost]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="134" data-linenumber="34">
            
              <span class="hits">134</span>
            

            

            <code class="ruby">    return [scope_class.all, false] if min.blank? &amp;&amp; max.blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="30" data-linenumber="36">
            
              <span class="hits">30</span>
            

            

            <code class="ruby">    numeric = -&gt;(v) { v.to_s.match?(/\A\d+(\.\d+)?\z/) }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12" data-linenumber="38">
            
              <span class="hits">12</span>
            

            

            <code class="ruby">    values_to_check = [min, max].reject(&amp;:blank?)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="30" data-linenumber="40">
            
              <span class="hits">30</span>
            

            

            <code class="ruby">    unless values_to_check.all? { |v| numeric.call(v) }</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="41">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">      flash.now[:alert] = &quot;Please enter valid numbers for cost&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="42">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">      return [scope_class.none, true]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="45">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">    [scope_class.all, false]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="48">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_cost_filter_for(relation)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="128" data-linenumber="49">
            
              <span class="hits">128</span>
            

            

            <code class="ruby">    min_param = params[:min_cost]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="128" data-linenumber="50">
            
              <span class="hits">128</span>
            

            

            <code class="ruby">    max_param = params[:max_cost]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="128" data-linenumber="52">
            
              <span class="hits">128</span>
            

            

            <code class="ruby">    return relation if min_param.blank? &amp;&amp; max_param.blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="53">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="54">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">    min = min_param.present? ? min_param.to_f : 0.0</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="55">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">    max = max_param.present? ? max_param.to_f : nil</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="56">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="57">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">    relation = relation.where(&quot;cost &gt;= ?&quot;, min) if min</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="58">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">    relation = relation.where(&quot;cost &lt;= ?&quot;, max) if max</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="59">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">    relation</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="60">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="61">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="969fabce688a964d0121d81d300280133a87e55d">
  <div class="header">
    <h3>app/controllers/flights_controller.rb</h3>
    <h4>
      <span class="yellow">
  80.56%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>36</b> relevant lines.
      <span class="green"><b>29</b> lines covered</span> and
      <span class="red"><b>7</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class FlightsController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  include SearchFilterable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  before_action :require_login</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="4">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  skip_before_action :require_login, only: :index</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="6">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def index</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="20" data-linenumber="7">
            
              <span class="hits">20</span>
            

            

            <code class="ruby">    @flights = Flight.all</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="20" data-linenumber="9">
            
              <span class="hits">20</span>
            

            

            <code class="ruby">    if params[:clear].present?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="10">
            

            

            <code class="ruby">      params[:departure_location] = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="11">
            

            

            <code class="ruby">      params[:arrival_location]   = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="12">
            

            

            <code class="ruby">      params[:start_date]         = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="13">
            

            

            <code class="ruby">      params[:end_date]           = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="14">
            

            

            <code class="ruby">      params[:min_cost]           = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="15">
            

            

            <code class="ruby">      params[:max_cost]           = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="16">
            

            

            <code class="ruby">      return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="20" data-linenumber="19">
            
              <span class="hits">20</span>
            

            

            <code class="ruby">    scope, date_error = handle_date_errors_for(Flight)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="20" data-linenumber="20">
            
              <span class="hits">20</span>
            

            

            <code class="ruby">    if date_error</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="21">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      @flights = scope</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="22">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="18" data-linenumber="25">
            
              <span class="hits">18</span>
            

            

            <code class="ruby">    scope, cost_error = handle_cost_errors_for(Flight)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="18" data-linenumber="26">
            
              <span class="hits">18</span>
            

            

            <code class="ruby">    if cost_error</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="27">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      @flights = scope</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="28">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="31">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    apply_departure_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="32">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    apply_arrival_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="33">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    apply_cost_filter</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="38">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="40">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_departure_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="41">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    return if params[:departure_location].blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="43">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">    departure = &quot;%#{params[:departure_location].downcase}%&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="44">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">    @flights = @flights.where(&quot;LOWER(departure_location) LIKE ?&quot;, departure)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="47">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_arrival_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="48">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    return if params[:arrival_location].blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="50">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    arrival = &quot;%#{params[:arrival_location].downcase}%&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="51">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    @flights = @flights.where(&quot;LOWER(arrival_location) LIKE ?&quot;, arrival)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="53">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="54">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_cost_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="55">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    @flights = apply_cost_filter_for(@flights)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="56">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="026a7873650a56654c375270e5da94a97e7ecfc6">
  <div class="header">
    <h3>app/controllers/hotels_controller.rb</h3>
    <h4>
      <span class="yellow">
  80.56%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>36</b> relevant lines.
      <span class="green"><b>29</b> lines covered</span> and
      <span class="red"><b>7</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class HotelsController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  include SearchFilterable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  before_action :require_login</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="4">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  skip_before_action :require_login, only: :index</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="6">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def index</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="20" data-linenumber="7">
            
              <span class="hits">20</span>
            

            

            <code class="ruby">    @hotels = Hotel.all</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="20" data-linenumber="9">
            
              <span class="hits">20</span>
            

            

            <code class="ruby">    if params[:clear].present?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="10">
            

            

            <code class="ruby">      params[:search_location] = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="11">
            

            

            <code class="ruby">      params[:start_date]      = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="12">
            

            

            <code class="ruby">      params[:end_date]        = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="13">
            

            

            <code class="ruby">      params[:min_cost]        = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="14">
            

            

            <code class="ruby">      params[:max_cost]        = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="15">
            

            

            <code class="ruby">      params[:min_rating]      = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="16">
            

            

            <code class="ruby">      return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="20" data-linenumber="19">
            
              <span class="hits">20</span>
            

            

            <code class="ruby">    scope, date_error = handle_date_errors_for(Hotel)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="20" data-linenumber="20">
            
              <span class="hits">20</span>
            

            

            <code class="ruby">    if date_error</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="21">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      @hotels = scope</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="22">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="18" data-linenumber="25">
            
              <span class="hits">18</span>
            

            

            <code class="ruby">    scope, cost_error = handle_cost_errors_for(Hotel)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="18" data-linenumber="26">
            
              <span class="hits">18</span>
            

            

            <code class="ruby">    if cost_error</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="27">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      @hotels = scope</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="28">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="31">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    apply_location_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="32">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    apply_rating_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="33">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    apply_cost_filter</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="37">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="39">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_location_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="40">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    return if params[:search_location].blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="42">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">    location = &quot;%#{params[:search_location].downcase}%&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="43">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">    @hotels = @hotels.where(&quot;LOWER(location) LIKE ?&quot;, location)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="46">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_rating_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="47">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    return if params[:min_rating].blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="49">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    min_rating = params[:min_rating].to_f</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="50">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    @hotels = @hotels.where(&quot;rating &gt;= ?&quot;, min_rating)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="53">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_cost_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="54">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">    @hotels = apply_cost_filter_for(@hotels)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="55">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="56">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="27d6b81a8df0fe93b06d95194e229765c0f6c270">
  <div class="header">
    <h3>app/controllers/itineraries_controller.rb</h3>
    <h4>
      <span class="yellow">
  88.52%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>61</b> relevant lines.
      <span class="green"><b>54</b> lines covered</span> and
      <span class="red"><b>7</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class ItinerariesController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  include SearchFilterable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  before_action :require_login</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            

            

            <code class="ruby">  # UNCOMMENT TO SEE THE ITINERARIES PAGE WITHOUT LOGIN AS IT IS NOT IMPLEMENTED YET</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            

            

            <code class="ruby">  # skip_before_action :require_login, only: :index </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="8">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def index</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="102" data-linenumber="9">
            
              <span class="hits">102</span>
            

            

            <code class="ruby">    @itineraries = ItineraryGroup.all</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="102" data-linenumber="11">
            
              <span class="hits">102</span>
            

            

            <code class="ruby">    if params[:clear].present?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="12">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      params[:search]     = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="13">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      params[:start_date] = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="14">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      params[:end_date]   = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="15">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      params[:min_cost]   = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="16">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      params[:max_cost]   = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="17">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      params[:location]   = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="18">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      params[:trip_type]  = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="19">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      params[:membership] = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="20">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="23">
            
              <span class="hits">100</span>
            

            

            <code class="ruby">    apply_search_filter</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="25">
            
              <span class="hits">100</span>
            

            

            <code class="ruby">    scope, date_error = handle_date_errors_for(ItineraryGroup)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="26">
            
              <span class="hits">100</span>
            

            

            <code class="ruby">    if date_error</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="27">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      @itineraries = scope</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="28">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="98" data-linenumber="31">
            
              <span class="hits">98</span>
            

            

            <code class="ruby">    scope, cost_error = handle_cost_errors_for(ItineraryGroup)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="98" data-linenumber="32">
            
              <span class="hits">98</span>
            

            

            <code class="ruby">    if cost_error</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="33">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      @itineraries = scope</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="34">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="96" data-linenumber="37">
            
              <span class="hits">96</span>
            

            

            <code class="ruby">    apply_date_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="96" data-linenumber="38">
            
              <span class="hits">96</span>
            

            

            <code class="ruby">    apply_location_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="96" data-linenumber="39">
            
              <span class="hits">96</span>
            

            

            <code class="ruby">    apply_trip_type_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="96" data-linenumber="40">
            
              <span class="hits">96</span>
            

            

            <code class="ruby">    apply_cost_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="96" data-linenumber="41">
            
              <span class="hits">96</span>
            

            

            <code class="ruby">    apply_membership_filter</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="46">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="48">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def base_scope</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="49">
            

            

            <code class="ruby">    ItineraryGroup.all</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="52">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_search_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="53">
            
              <span class="hits">100</span>
            

            

            <code class="ruby">    return if params[:search].blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="54">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12" data-linenumber="55">
            
              <span class="hits">12</span>
            

            

            <code class="ruby">    keyword = &quot;%#{params[:search]}%&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12" data-linenumber="56">
            
              <span class="hits">12</span>
            

            

            <code class="ruby">    @itineraries = @itineraries.where(</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            

            

            <code class="ruby">      &quot;LOWER(title) LIKE :kw OR LOWER(description) LIKE :kw&quot;, kw: keyword</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            

            

            <code class="ruby">    )</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="59">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="60">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="61">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_date_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="96" data-linenumber="62">
            
              <span class="hits">96</span>
            

            

            <code class="ruby">    return if params[:start_date].blank? &amp;&amp; params[:end_date].blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="63">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="64">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    start_date = params[:start_date].present? ? Date.parse(params[:start_date]) : nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="65">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    end_date   = params[:end_date].present?   ? Date.parse(params[:end_date])   : nil</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="66">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="67">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    scope = @itineraries</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="68">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    scope = scope.where(&quot;start_date &gt;= ?&quot;, start_date) if start_date</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="69">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    scope = scope.where(&quot;end_date &lt;= ?&quot;, end_date)     if end_date</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="70">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    @itineraries = scope</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="71">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="72">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="73">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_location_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="96" data-linenumber="74">
            
              <span class="hits">96</span>
            

            

            <code class="ruby">    return if params[:location].blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="75">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="76">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    @itineraries = @itineraries.where(&quot;LOWER(location) LIKE ?&quot;, &quot;%#{params[:location]}%&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="77">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="78">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="79">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_trip_type_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="96" data-linenumber="80">
            
              <span class="hits">96</span>
            

            

            <code class="ruby">    return if params[:trip_type].blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="81">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14" data-linenumber="82">
            
              <span class="hits">14</span>
            

            

            <code class="ruby">    private_flag = params[:trip_type].casecmp(&quot;Private&quot;).zero?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14" data-linenumber="83">
            
              <span class="hits">14</span>
            

            

            <code class="ruby">    @itineraries = @itineraries.where(is_private: private_flag)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="84">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="85">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="86">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_cost_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="96" data-linenumber="87">
            
              <span class="hits">96</span>
            

            

            <code class="ruby">    @itineraries = apply_cost_filter_for(@itineraries)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="88">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="89">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="90">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def apply_membership_filter</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="96" data-linenumber="91">
            
              <span class="hits">96</span>
            

            

            <code class="ruby">    return if params[:membership].blank?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="92">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="93">
            

            

            <code class="ruby">    case params[:membership].downcase</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="94">
            

            

            <code class="ruby">    when &quot;created&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="95">
            

            

            <code class="ruby">      # itineraries where current_user is the creator</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="96">
            

            

            <code class="ruby">      @itineraries = @itineraries.where(organizer_id: current_user.id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="97">
            

            

            <code class="ruby">    when &quot;joined&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="98">
            

            

            <code class="ruby">      # itineraries where user is an attendee (through itinerary_attendees table)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="99">
            

            

            <code class="ruby">      @itineraries = @itineraries.joins(:itinerary_attendees)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="100">
            

            

            <code class="ruby">                               .where(itinerary_attendees: { user_id: current_user.id })</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="101">
            

            

            <code class="ruby">    when &quot;none&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="102">
            

            

            <code class="ruby">      # itineraries user did NOT join OR create</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="103">
            

            

            <code class="ruby">      created_ids = ItineraryGroup.where(organizer_id: current_user.id).select(:id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="104">
            

            

            <code class="ruby">      joined_ids  = ItineraryAttendee.where(user_id: current_user.id).select(:itinerary_group_id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="105">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="106">
            

            

            <code class="ruby">      @itineraries = @itineraries.where.not(id: created_ids).where.not(id: joined_ids)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="107">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="108">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="109">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="3287a97176dfb4c635bb36f6318a341a95b67dad">
  <div class="header">
    <h3>app/controllers/itinerary_groups_controller.rb</h3>
    <h4>
      <span class="yellow">
  87.32%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>71</b> relevant lines.
      <span class="green"><b>62</b> lines covered</span> and
      <span class="red"><b>9</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class ItineraryGroupsController &lt; ApplicationController </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  before_action :require_organizer, only: [:edit, :update]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="5">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="6">
            
              <span class="hits">8</span>
            

            

            <code class="ruby">    @itinerary_group = ItineraryGroup.new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="9">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def create</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="10">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">    @itinerary_group = ItineraryGroup.new(itinerary_group_params)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="11">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">    @itinerary_group.organizer = current_user</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="13">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">    if @itinerary_group.save</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="14">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      @itinerary_group.users &lt;&lt; current_user   # add organizer</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="15">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      redirect_to itinerary_path(@itinerary_group), notice: &#39;Itinerary Created&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="17">
            
              <span class="hits">7</span>
            

            

            <code class="ruby">      flash.now[:alert] = @itinerary_group.errors.full_messages.join(&quot;, &quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="18">
            
              <span class="hits">7</span>
            

            

            <code class="ruby">      render :new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="22">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def edit</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="23">
            
              <span class="hits">17</span>
            

            

            <code class="ruby">    @itinerary_group = ItineraryGroup.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="25">
            
              <span class="hits">17</span>
            

            

            <code class="ruby">    trip_start = @itinerary_group.start_date</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="26">
            
              <span class="hits">17</span>
            

            

            <code class="ruby">    trip_end   = @itinerary_group.end_date</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="28">
            
              <span class="hits">17</span>
            

            

            <code class="ruby">    @matching_hotels = Hotel</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            

            

            <code class="ruby">      .where(location: @itinerary_group.location)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            

            

            <code class="ruby">      .where(&quot;arrival_time &lt;= ? AND departure_time &gt;= ?&quot;, trip_end - 1.days, trip_start + 1.days)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="32">
            
              <span class="hits">17</span>
            

            

            <code class="ruby">    @matching_flights = Flight</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            

            

            <code class="ruby">      .where(arrival_location: @itinerary_group.location)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            

            

            <code class="ruby">      .where(</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            

            

            <code class="ruby">        &quot;DATE(arrival_time) BETWEEN ? AND ?&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            

            

            <code class="ruby">        trip_start - 2.days,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            

            

            <code class="ruby">        trip_start + 1.days</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            

            

            <code class="ruby">      )</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="41">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def update</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="18" data-linenumber="42">
            
              <span class="hits">18</span>
            

            

            <code class="ruby">    @itinerary_group = ItineraryGroup.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="18" data-linenumber="44">
            
              <span class="hits">18</span>
            

            

            <code class="ruby">    if @itinerary_group.update(itinerary_group_params)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="11" data-linenumber="45">
            
              <span class="hits">11</span>
            

            

            <code class="ruby">      flash[:notice] = &quot;Itinerary was successfully updated.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="11" data-linenumber="46">
            
              <span class="hits">11</span>
            

            

            <code class="ruby">      redirect_to itinerary_path(@itinerary_group)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="48">
            
              <span class="hits">7</span>
            

            

            <code class="ruby">      @matching_hotels = Hotel.where(location: @itinerary_group.location)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="49">
            
              <span class="hits">7</span>
            

            

            <code class="ruby">      @matching_flights = Flight.where(arrival_location: @itinerary_group.location)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="50">
            
              <span class="hits">7</span>
            

            

            <code class="ruby">      render :edit</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="53">
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="54">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def show</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="38" data-linenumber="55">
            
              <span class="hits">38</span>
            

            

            <code class="ruby">    @itinerary_group = ItineraryGroup.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="38" data-linenumber="56">
            
              <span class="hits">38</span>
            

            

            <code class="ruby">    @can_view_private = can_view_itinerary?(@itinerary_group)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="38" data-linenumber="58">
            
              <span class="hits">38</span>
            

            

            <code class="ruby">    if @itinerary_group.is_private &amp;&amp; !@can_view_private</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="59">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      flash[:alert] = &quot;This itinerary is private and cannot be viewed.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="60">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      @organizer = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="61">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      @attendees = []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="62">
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="33" data-linenumber="63">
            
              <span class="hits">33</span>
            

            

            <code class="ruby">      @organizer = @itinerary_group.organizer</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="33" data-linenumber="64">
            
              <span class="hits">33</span>
            

            

            <code class="ruby">      @attendees = @itinerary_group.attendees</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="65">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="66">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="67">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="68">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def join</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="69">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">    @itinerary_group = ItineraryGroup.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="70">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="71">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">    unless @itinerary_group.is_private</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="72">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      return redirect_to itinerary_path(@itinerary_group)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="73">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="74">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="75">
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="76">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def join_itinerary</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14" data-linenumber="77">
            
              <span class="hits">14</span>
            

            

            <code class="ruby">    @itinerary_group = ItineraryGroup.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14" data-linenumber="78">
            
              <span class="hits">14</span>
            

            

            <code class="ruby">    if @itinerary_group.is_private &amp;&amp; params[:password] != @itinerary_group.password</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="79">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      flash[:alert] = &quot;Incorrect trip password.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="80">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      render :join</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="81">
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="82">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">      unless @itinerary_group.users.exists?(current_user.id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="83">
            
              <span class="hits">8</span>
            

            

            <code class="ruby">        @itinerary_group.users &lt;&lt; current_user</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="84">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="85">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">      flash[:notice] = &quot;You have joined the trip successfully.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="86">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">      if session[:pending_chat_group_id].to_i == @itinerary_group.id</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="87">
            

            

            <code class="ruby">        session.delete(:pending_chat_group_id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="88">
            

            

            <code class="ruby">        redirect_to itinerary_group_messages_path(@itinerary_group)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="89">
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="90">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">        redirect_to itinerary_path(@itinerary_group)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="91">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="92">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="93">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="94">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="95">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def leave_itinerary</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="96">
            

            

            <code class="ruby">    @itinerary_group = ItineraryGroup.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="97">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="98">
            

            

            <code class="ruby">    attendee_record = ItineraryAttendee.find_by(</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="99">
            

            

            <code class="ruby">      itinerary_group_id: @itinerary_group.id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="100">
            

            

            <code class="ruby">      user_id: current_user.id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="101">
            

            

            <code class="ruby">    )</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="102">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="103">
            

            

            <code class="ruby">    if attendee_record</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="104">
            

            

            <code class="ruby">      attendee_record.destroy</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="105">
            

            

            <code class="ruby">      flash[:notice] = &quot;You have left the trip.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="106">
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="107">
            

            

            <code class="ruby">      flash[:alert] = &quot;You are not part of this trip.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="108">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="109">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="110">
            

            

            <code class="ruby">    redirect_to itineraries_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="111">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="112">
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="113">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="114">
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="115">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def can_view_itinerary?(itinerary_group)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="38" data-linenumber="116">
            
              <span class="hits">38</span>
            

            

            <code class="ruby">    return true unless itinerary_group.is_private</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="13" data-linenumber="117">
            
              <span class="hits">13</span>
            

            

            <code class="ruby">    return false unless current_user</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="118">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="13" data-linenumber="119">
            
              <span class="hits">13</span>
            

            

            <code class="ruby">    itinerary_group.organizer_id == current_user.id ||</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="120">
            

            

            <code class="ruby">      itinerary_group.users.exists?(id: current_user.id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="121">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="122">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="123">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def itinerary_group_params</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="27" data-linenumber="124">
            
              <span class="hits">27</span>
            

            

            <code class="ruby">    params.require(:itinerary_group).permit(</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="125">
            

            

            <code class="ruby">      :title, :description, :location, :start_date, :end_date, :is_private,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="126">
            

            

            <code class="ruby">      :password, :cost,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="127">
            

            

            <code class="ruby">      hotel_ids: [],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="128">
            

            

            <code class="ruby">      flight_ids: []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="129">
            

            

            <code class="ruby">    )</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="130">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="131">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="132">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def require_organizer</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="39" data-linenumber="133">
            
              <span class="hits">39</span>
            

            

            <code class="ruby">    @itinerary_group = ItineraryGroup.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="39" data-linenumber="134">
            
              <span class="hits">39</span>
            

            

            <code class="ruby">    unless current_user &amp;&amp; @itinerary_group.organizer_id == current_user.id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="135">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">      flash[:alert] = &quot;You must be the organizer to edit this itinerary.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="136">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">      redirect_to itinerary_path(@itinerary_group)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="137">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="138">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="139">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="502c680c2957f1435037d2fa6a64dea565e1a6d1">
  <div class="header">
    <h3>app/controllers/messages_controller.rb</h3>
    <h4>
      <span class="green">
  90.63%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>32</b> relevant lines.
      <span class="green"><b>29</b> lines covered</span> and
      <span class="red"><b>3</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">class MessagesController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  before_action :set_itinerary_group, only: [:index, :create]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  before_action :ensure_group_membership, only: [:index, :create]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  def index</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="24" data-linenumber="6">
            
              <span class="hits">24</span>
            

            

            <code class="ruby">    @messages = @itinerary_group.messages.order(time: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="9">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  def create</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="10">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    text  = params[:text].to_s</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="12">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    unless text.strip.empty?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            

            

            <code class="ruby">      begin</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="14">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">        if session[:simulate_message_failure]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="15">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">          raise ActiveRecord::ActiveRecordError, &quot;Simulated failure&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="18">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">        Message.create!(</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            

            

            <code class="ruby">          user_id:            session[:user_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            

            

            <code class="ruby">          itinerary_group_id: @itinerary_group.id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            

            

            <code class="ruby">          text:               text,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            

            

            <code class="ruby">          time:               Time.current</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            

            

            <code class="ruby">        )</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            

            

            <code class="ruby">      rescue ActiveRecord::ActiveRecordError</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="25">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        flash[:alert] = &quot;Unable to send&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="26">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        flash[:failed_text] = text</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            

            

            <code class="ruby">      ensure</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="28">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">        session.delete(:simulate_message_failure)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="32">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    redirect_to itinerary_group_messages_path(@itinerary_group)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="35">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  def update</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="36">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    message = Message.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="38">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    if message.user_id == session[:user_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="39">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      new_text = params[:text].to_s</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="40">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      message.update!(text: new_text) unless new_text.strip.empty?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="43">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    redirect_to itinerary_group_messages_path(message.itinerary_group_id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="46">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="48">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  def set_itinerary_group</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="29" data-linenumber="49">
            
              <span class="hits">29</span>
            

            

            <code class="ruby">    group_id = params[:itinerary_group_id] || params[:id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="29" data-linenumber="50">
            
              <span class="hits">29</span>
            

            

            <code class="ruby">    @itinerary_group = ItineraryGroup.find(group_id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="53">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  def ensure_group_membership</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="29" data-linenumber="54">
            
              <span class="hits">29</span>
            

            

            <code class="ruby">    return if current_user.nil?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="29" data-linenumber="55">
            
              <span class="hits">29</span>
            

            

            <code class="ruby">    return if @itinerary_group.organizer_id == current_user.id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="29" data-linenumber="56">
            
              <span class="hits">29</span>
            

            

            <code class="ruby">    return if @itinerary_group.users.exists?(current_user.id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="58">
            

            

            <code class="ruby">    session[:pending_chat_group_id] = @itinerary_group.id</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="59">
            

            

            <code class="ruby">    flash[:alert] = &quot;Join the trip to access its group chat.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="60">
            

            

            <code class="ruby">    redirect_to join_itinerary_path(@itinerary_group)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="61">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="62">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="fc2417fa08e89e0a272e03ebf3ab11d14c7f53a3">
  <div class="header">
    <h3>app/controllers/sessions_controller.rb</h3>
    <h4>
      <span class="yellow">
  80.77%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>26</b> relevant lines.
      <span class="green"><b>21</b> lines covered</span> and
      <span class="red"><b>5</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class SessionsController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    skip_before_action :require_login, only: [:new, :create]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    skip_before_action :verify_authenticity_token, only: [:omniauth]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="4">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def new </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="48" data-linenumber="5">
            
              <span class="hits">48</span>
            

            

            <code class="ruby">        @user = User.new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="8">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def create</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="107" data-linenumber="9">
            
              <span class="hits">107</span>
            

            

            <code class="ruby">        user = User.find_by(username: params[:user][:username])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="107" data-linenumber="10">
            
              <span class="hits">107</span>
            

            

            <code class="ruby">        if user&amp;.authenticate(params[:user][:password])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="104" data-linenumber="11">
            
              <span class="hits">104</span>
            

            

            <code class="ruby">            reset_session</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="104" data-linenumber="12">
            
              <span class="hits">104</span>
            

            

            <code class="ruby">            session[:user_id] = user.id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="104" data-linenumber="13">
            
              <span class="hits">104</span>
            

            

            <code class="ruby">            redirect_to itineraries_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            

            

            <code class="ruby">        else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="15">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">            flash[:alert] = &quot;Invalid username and/or password&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="16">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">            @user = User.new(username: &quot;&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="17">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">            @rendering_login_page = true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="18">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">            render :new, status: :unprocessable_entity</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="24">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="25">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        session[:user_id] = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="26">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        flash[:notice] = &quot;You have been logged out&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="27">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        redirect_to login_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="30">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def omniauth</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="31">
            

            

            <code class="ruby">        auth = request.env[&quot;omniauth.auth&quot;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="32">
            

            

            <code class="ruby">        user = User.from_omniauth(auth)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="33">
            

            

            <code class="ruby">        session[:user_id] = user.id</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="34">
            

            

            <code class="ruby">        redirect_to root_path, notice: &quot;Signed in with Google&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="37">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def failure</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="38">
            

            

            <code class="ruby">    redirect_to login_path, alert: &quot;Authentication failed&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="6847f39bcad06aa4ff7a3ac635215779a0cb1bbb">
  <div class="header">
    <h3>app/controllers/users_controller.rb</h3>
    <h4>
      <span class="yellow">
  83.67%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>49</b> relevant lines.
      <span class="green"><b>41</b> lines covered</span> and
      <span class="red"><b>8</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class UsersController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  skip_before_action :require_login, only: [:new, :create]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  before_action :set_user, only: [:edit, :update]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="5">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="6">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">    @user = User.new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="9">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def create</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="10">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">    @user = User.new(user_params)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="12">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">    if @user.save</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="13">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">      session[:user_id] = @user.id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="14">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">      flash[:signup_success] = &quot;Account created successfully&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="15">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">      redirect_to itineraries_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="17">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">      render :new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="21">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def edit</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="22">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">    correct_id = session[:user_id].to_s</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="23">
            
              <span class="hits">9</span>
            

            

            <code class="ruby">    if params[:id] != correct_id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="24">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      return redirect_to edit_user_path(correct_id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="28">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def update</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="29">
            
              <span class="hits">8</span>
            

            

            <code class="ruby">    if !@user.oauth_user? &amp;&amp; !@user.authenticate(params[:current_password])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="30">
            

            

            <code class="ruby">      flash.now[:alert] = &quot;Current password is incorrect&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="31">
            

            

            <code class="ruby">      return render :edit</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            

            

            <code class="ruby">    # we will work with modifiable parameters</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="36">
            
              <span class="hits">8</span>
            

            

            <code class="ruby">    update_params = user_params.dup</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="38">
            
              <span class="hits">8</span>
            

            

            <code class="ruby">    new_password = update_params[:password]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="39">
            
              <span class="hits">8</span>
            

            

            <code class="ruby">    confirm      = update_params[:password_confirmation]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            

            

            <code class="ruby">    # when BOTH password fields are empty we ignore password update entirely</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="42">
            
              <span class="hits">8</span>
            

            

            <code class="ruby">    if new_password.blank? &amp;&amp; confirm.blank?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="43">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">      update_params.delete(:password)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="44">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">      update_params.delete(:password_confirmation)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="46">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    elsif new_password.blank? &amp;&amp; confirm.present?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="47">
            

            

            <code class="ruby">      flash.now[:alert] = &quot;New password cannot be blank&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="48">
            

            

            <code class="ruby">      return render :edit</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="50">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    elsif new_password.present? &amp;&amp; confirm.blank?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="51">
            

            

            <code class="ruby">      flash.now[:alert] = &quot;Password confirmation can&#39;t be blank&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="52">
            

            

            <code class="ruby">      return render :edit</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="53">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="54">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    elsif new_password != confirm</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="55">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      flash.now[:alert] = &quot;New password and confirmation do not match&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="56">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      return render :edit</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="59">
            
              <span class="hits">7</span>
            

            

            <code class="ruby">    if update_params[:username].present? &amp;&amp;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="60">
            

            

            <code class="ruby">       update_params[:username] != @user.username &amp;&amp;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="61">
            

            

            <code class="ruby">       User.exists?(username: update_params[:username])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="62">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      flash.now[:alert] = &quot;Username already taken&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="63">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      return render :edit</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="64">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="65">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="66">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">    if @user.update(update_params)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="67">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">      flash[:notice] = &quot;Profile updated successfully&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="68">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">      redirect_to itineraries_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="69">
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="70">
            

            

            <code class="ruby">      flash.now[:alert] = &quot;There was an error in updating the profile&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="71">
            

            

            <code class="ruby">      render :edit</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="72">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="73">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="74">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="75">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="76">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="77">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="78">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="79">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def set_user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="80">
            
              <span class="hits">17</span>
            

            

            <code class="ruby">    if @user != User.find(session[:user_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="81">
            
              <span class="hits">17</span>
            

            

            <code class="ruby">      @user = User.find(session[:user_id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="82">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="83">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="84">
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="85">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def user_params</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="86">
            
              <span class="hits">17</span>
            

            

            <code class="ruby">    params.require(:user).permit(</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="87">
            

            

            <code class="ruby">      :username,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="88">
            

            

            <code class="ruby">      :role,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="89">
            

            

            <code class="ruby">      :password,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="90">
            

            

            <code class="ruby">      :password_confirmation,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="91">
            

            

            <code class="ruby">      :first_name,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="92">
            

            

            <code class="ruby">      :last_name,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="93">
            

            

            <code class="ruby">      :age,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="94">
            

            

            <code class="ruby">      :gender</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="95">
            

            

            <code class="ruby">    )</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="96">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="97">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="98">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="a495addb7b1a0494af5c5eb835bee36d736fcf07">
  <div class="header">
    <h3>app/helpers/application_helper.rb</h3>
    <h4>
      <span class="yellow">
  87.5%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>8</b> relevant lines.
      <span class="green"><b>7</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">module ApplicationHelper</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def current_user</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="3">
            

            

            <code class="ruby">        @current_user ||= User.find_by(id: session[:user_id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="5">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def bootstrap_class_for_flash(flash_type)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="70" data-linenumber="6">
            
              <span class="hits">70</span>
            

            

            <code class="ruby">        case flash_type.to_sym</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="7">
            
              <span class="hits">26</span>
            

            

            <code class="ruby">        when :notice then &quot;success&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="41" data-linenumber="8">
            
              <span class="hits">41</span>
            

            

            <code class="ruby">        when :alert  then &quot;danger&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="9">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        else &quot;info&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="c28cf9f519019cbc3cccd9d89111e8646427a7c7">
  <div class="header">
    <h3>app/jobs/application_job.rb</h3>
    <h4>
      <span class="red">
  0.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>2</b> relevant lines.
      <span class="green"><b>0</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="1">
            

            

            <code class="ruby">class ApplicationJob &lt; ActiveJob::Base</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            

            

            <code class="ruby">  # Automatically retry jobs that encountered a deadlock</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            

            

            <code class="ruby">  # retry_on ActiveRecord::Deadlocked</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            

            

            <code class="ruby">  # Most jobs are safe to ignore if the underlying records are no longer available</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            

            

            <code class="ruby">  # discard_on ActiveJob::DeserializationError</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="7">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="72f9f6f8d251fb1b6f853ac1b6bf157d6d19f0f9">
  <div class="header">
    <h3>app/mailers/application_mailer.rb</h3>
    <h4>
      <span class="red">
  0.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>4</b> relevant lines.
      <span class="green"><b>0</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="1">
            

            

            <code class="ruby">class ApplicationMailer &lt; ActionMailer::Base</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="2">
            

            

            <code class="ruby">  default from: &quot;from@example.com&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="3">
            

            

            <code class="ruby">  layout &quot;mailer&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="4">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="49891b2adf3dcea70c8005bc2e4296c99fda94fb">
  <div class="header">
    <h3>app/models/application_record.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>2</b> relevant lines.
      <span class="green"><b>2</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class ApplicationRecord &lt; ActiveRecord::Base</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  primary_abstract_class</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="240b00c1474a6d2302d45d2d362776f54eb8547a">
  <div class="header">
    <h3>app/models/flight.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>9</b> relevant lines.
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class Flight &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            

            

            <code class="ruby">  # Associations</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :itinerary_flights, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="4">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :itinerary_groups, through: :itinerary_flights</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            

            

            <code class="ruby">  # Validations</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="7">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :flight_number, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="8">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :departure_location, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="9">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :arrival_location, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="10">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :departure_time, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="11">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :arrival_time, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="12">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :cost, numericality: { greater_than_or_equal_to: 0 }, allow_nil: true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="fa2c06ead3062c1842f6c759f36c12ff8aa6ae6a">
  <div class="header">
    <h3>app/models/hotel.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>9</b> relevant lines.
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class Hotel &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            

            

            <code class="ruby">  # Associations</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :itinerary_hotels, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="4">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :itinerary_groups, through: :itinerary_hotels</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            

            

            <code class="ruby">  # Validations</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="7">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :name, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="8">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :location, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="9">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :rating, numericality: {</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            

            

            <code class="ruby">    greater_than_or_equal_to: 1.0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            

            

            <code class="ruby">    less_than_or_equal_to: 5.0</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            

            

            <code class="ruby">  }, allow_nil: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="13">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :cost, numericality: { greater_than_or_equal_to: 0 }, allow_nil: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="14">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :departure_time, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="15">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :arrival_time, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="9836a563bfc4659434f196e69b471aa75bd8b0b7">
  <div class="header">
    <h3>app/models/itinerary_attendee.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>4</b> relevant lines.
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class ItineraryAttendee &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    belongs_to :user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    belongs_to :itinerary_group</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="5">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    validates :user_id, uniqueness: { </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            

            

            <code class="ruby">        scope: :itinerary_group_id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            

            

            <code class="ruby">        message: &#39;is already part of itinerary&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            

            

            <code class="ruby">    }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="ca669059dc7f9b44452d3727e6b9464f494bf161">
  <div class="header">
    <h3>app/models/itinerary_flight.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>4</b> relevant lines.
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class ItineraryFlight &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  belongs_to :flight</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  belongs_to :itinerary_group</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="5">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :flight_id, uniqueness: { scope: :itinerary_group_id }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="d1ce25ce2e37e4dcdf22a6ecd6b51bed9ce030ff">
  <div class="header">
    <h3>app/models/itinerary_group.rb</h3>
    <h4>
      <span class="green">
  92.68%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>41</b> relevant lines.
      <span class="green"><b>38</b> lines covered</span> and
      <span class="red"><b>3</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class ItineraryGroup &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            

            

            <code class="ruby">  # Associations</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            

            

            <code class="ruby">  # organizer ID</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="4">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  belongs_to :organizer, class_name: &quot;User&quot;, optional: true </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="6">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :itinerary_attendees, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="7">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :users, through: :itinerary_attendees</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="8">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :attendees, through: :itinerary_attendees, source: :user</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="11">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :itinerary_flights, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="12">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :flights, through: :itinerary_flights</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="14">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :itinerary_hotels, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="15">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :hotels, through: :itinerary_hotels</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="17">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :messages, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            

            

            <code class="ruby">  # Validations</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="20">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :title, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="21">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :location, presence: {message: &quot;field can&#39;t be blank&quot;}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="22">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :start_date, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="23">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :end_date, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="24">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validate :chronological_dates</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="25">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validate :dates_not_in_past</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="26">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validate :private_password_check</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            

            

            <code class="ruby">  # validates :cost,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            

            

            <code class="ruby">  #   numericality: {</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            

            

            <code class="ruby">  #     only_integer: true,               </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            

            

            <code class="ruby">  #     message: &#39;must be an integer&#39;     </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            

            

            <code class="ruby">  #   },</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            

            

            <code class="ruby">  #   allow_nil: true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="34">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :cost,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            

            

            <code class="ruby">    numericality: {              </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            

            

            <code class="ruby">      greater_than_or_equal_to: 0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            

            

            <code class="ruby">      message: &#39;must be greater or equal to 0&#39;   </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            

            

            <code class="ruby">    },</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            

            

            <code class="ruby">    allow_nil: true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="41">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :cost,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            

            

            <code class="ruby">    numericality: {</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            

            

            <code class="ruby">      message:&#39;is not a number&#39;      </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            

            

            <code class="ruby">    },</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            

            

            <code class="ruby">    allow_nil: true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="48">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def chronological_dates</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="313" data-linenumber="49">
            
              <span class="hits">313</span>
            

            

            <code class="ruby">    return if start_date.blank? || end_date.blank?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="306" data-linenumber="50">
            
              <span class="hits">306</span>
            

            

            <code class="ruby">    if end_date &lt; start_date</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="51">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      errors.add(:base, &quot;end_date must be after or the same as start_date&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="53">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="54">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="55">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def dates_not_in_past</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="313" data-linenumber="56">
            
              <span class="hits">313</span>
            

            

            <code class="ruby">    return if start_date.blank? || end_date.blank?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="306" data-linenumber="57">
            
              <span class="hits">306</span>
            

            

            <code class="ruby">      current = Date.current</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="306" data-linenumber="59">
            
              <span class="hits">306</span>
            

            

            <code class="ruby">    if start_date &lt; current || end_date &lt; current</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="60">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">      errors.add(:base, &quot;start_date and end_date must be in the future&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="61">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="62">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="63">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="64">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def private_password_check</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="313" data-linenumber="65">
            
              <span class="hits">313</span>
            

            

            <code class="ruby">    if is_private? &amp;&amp; password.blank?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="66">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">      errors.add(:password, &#39;required for private trips&#39;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="67">
            

            

            <code class="ruby">    end </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="68">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="69">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="70">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def trip_type</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="71">
            

            

            <code class="ruby">    is_private? ? &quot;Private&quot; : &quot;Public&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="72">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="73">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="74">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def trip_type=(value)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="129" data-linenumber="75">
            
              <span class="hits">129</span>
            

            

            <code class="ruby">    self.is_private = value.to_s.casecmp(&quot;Private&quot;).zero?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="76">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="77">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="78">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">    def organized_by?(user)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="33" data-linenumber="79">
            
              <span class="hits">33</span>
            

            

            <code class="ruby">      organizer_id == user.id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="80">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="81">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="82">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="83">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="84">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def end_date_not_before_start</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="85">
            

            

            <code class="ruby">    return if start_date.blank? || end_date.blank?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="86">
            

            

            <code class="ruby">    errors.add(:end_date, &quot;can&#39;t be before start_date&quot;) if end_date &lt; start_date</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="87">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="88">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="1cc59e84cc0399b043da6ad0e47751762cd9bdbd">
  <div class="header">
    <h3>app/models/itinerary_hotel.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>4</b> relevant lines.
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class ItineraryHotel &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  belongs_to :hotel</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  belongs_to :itinerary_group</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="5">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :hotel_id, uniqueness: { scope: :itinerary_group_id }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="ad9e1669699c3de6324859019bf0ccd417d8d980">
  <div class="header">
    <h3>app/models/message.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>3</b> relevant lines.
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">class Message &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :itinerary_group</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="442909b221cd697bf8562543187c3bd3089ea105">
  <div class="header">
    <h3>app/models/user.rb</h3>
    <h4>
      <span class="red">
  70.97%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>31</b> relevant lines.
      <span class="green"><b>22</b> lines covered</span> and
      <span class="red"><b>9</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="1">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">class User &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="2">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_secure_password</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="3">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :messages</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="5">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :itinerary_attendees, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="6">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :itinerary_groups, through: :itinerary_attendees</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="7">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  has_many :organized_groups, class_name: &#39;ItineraryGroup&#39;, foreign_key: &#39;organizer_id&#39;, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="9">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :role, presence: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="10">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  validates :username, presence: true, uniqueness: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="320" data-linenumber="11">
            
              <span class="hits">320</span>
            

            

            <code class="ruby">  validates :password, presence: true, on: :create, unless: -&gt; { provider.present? &amp;&amp; uid.present? }</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="320" data-linenumber="12">
            
              <span class="hits">320</span>
            

            

            <code class="ruby">  validates :password_confirmation, presence: true, on: :create, unless: -&gt; { provider.present? &amp;&amp; uid.present? }</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="320" data-linenumber="13">
            
              <span class="hits">320</span>
            

            

            <code class="ruby">  validate  :passwords_match, on: :create, unless: -&gt; { provider.present? &amp;&amp; uid.present? }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="15">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def self.from_omniauth(auth)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="16">
            

            

            <code class="ruby">    find_or_initialize_by(provider: auth.provider, uid: auth.uid).tap do |user|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="17">
            

            

            <code class="ruby">      user.username = auth.info.email</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="18">
            

            

            <code class="ruby">      random_password = SecureRandom.hex(10)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="19">
            

            

            <code class="ruby">      user.password = random_password</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="20">
            

            

            <code class="ruby">      user.password_confirmation = random_password</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="21">
            

            

            <code class="ruby">      user.role ||= &quot;user&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="22">
            

            

            <code class="ruby">      user.save! if user.new_record?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="26">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def admin?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="32" data-linenumber="27">
            
              <span class="hits">32</span>
            

            

            <code class="ruby">    role == &quot;admin&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="30">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def organizer?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="31">
            

            

            <code class="ruby">    role == &quot;organizer&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="34">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def user?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="35">
            

            

            <code class="ruby">    role == &quot;user&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="38">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def oauth_user?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="18" data-linenumber="39">
            
              <span class="hits">18</span>
            

            

            <code class="ruby">    provider.present?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="43">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="45">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">  def passwords_match</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="318" data-linenumber="46">
            
              <span class="hits">318</span>
            

            

            <code class="ruby">    if password != password_confirmation</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="47">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">      errors.add(:password_confirmation)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
      </div>
    </div>
  </body>
</html>
